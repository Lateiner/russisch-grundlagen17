<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aufgabe: Wegbeschreibung (4 Karten)</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e67e22;
            --success-color: #27ae60;
            --error-color: #c0392b;
            --bg-light: #f4f6f7;
            --white: #ffffff;
            --highlight: #e8f4fd;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            margin: 0;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--white);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h2 {
            color: var(--primary-color);
            text-align: center;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 25px;
        }

        .instruction {
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 30px;
            color: #555;
            background-color: var(--highlight);
            padding: 15px;
            border-radius: 6px;
            border-left: 5px solid var(--secondary-color);
        }

        /* Wrapper für eine einzelne Aufgabe */
        .task-wrapper {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 40px;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .task-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1em;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }

        /* SVG Karte */
        .map-container {
            width: 100%;
            background-color: #fcfcfc;
            border: 1px solid #eee;
            border-radius: 6px;
            margin-bottom: 20px;
            overflow: hidden;
            text-align: center;
        }

        svg {
            width: 100%;
            height: auto;
            max-height: 200px;
            display: block;
            margin: 0 auto;
        }

        /* SVG Elemente */
        .path-route {
            fill: none;
            stroke: var(--secondary-color);
            stroke-width: 3;
            stroke-dasharray: 8, 4;
            animation: dash 40s linear infinite;
        }
        
        .building { fill: white; stroke: #555; stroke-width: 2; }
        .building-label { font-size: 11px; font-family: sans-serif; fill: #333; font-weight: bold; text-anchor: middle; }
        
        /* Drag & Drop Areas */
        .sortable-area {
            min-height: 60px;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            justify-content: center;
        }

        .source-container {
            background-color: #ecf0f1;
            border: 2px dashed #bdc3c7;
        }

        .target-container {
            background-color: #fff;
            border: 2px solid var(--secondary-color);
            position: relative;
        }

        .target-container:empty::before {
            content: "Satz hier bauen...";
            color: #ccc;
            font-style: italic;
        }

        /* Wort-Karten */
        .word-card {
            background-color: var(--primary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.95em;
            user-select: none;
            box-shadow: 0 2px 3px rgba(0,0,0,0.2);
            transition: transform 0.1s, background-color 0.2s;
        }

        .word-card:hover {
            background-color: #34495e;
            transform: translateY(-2px);
        }

        /* Feedback Farben */
        .target-container.correct {
            background-color: #d4edda;
            border-color: var(--success-color);
        }

        .target-container.wrong {
            background-color: #f8d7da;
            border-color: var(--error-color);
        }

        /* Buttons */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            color: white;
            transition: background 0.3s;
        }

        .btn-check { background-color: var(--secondary-color); }
        .btn-check:hover { background-color: #2980b9; }

        .btn-reset { background-color: #95a5a6; }
        .btn-reset:hover { background-color: #7f8c8d; }

        .btn-solve { background-color: var(--accent-color); }
        .btn-solve:hover { background-color: #d35400; }

        @keyframes dash { to { stroke-dashoffset: -1000; } }

        @media (max-width: 600px) {
            .container { padding: 15px; }
            .word-card { width: 100%; text-align: center; }
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Wegbeschreibung: 4 Routen</h2>
    <p class="instruction">
        Schauen Sie sich die Karten an.<br>
        Bringen Sie die Satzteile in die richtige Reihenfolge, um den Weg zu beschreiben.<br>
        <small>(Klicken Sie auf die Wörter, um sie zu bewegen)</small>
    </p>

    <!-- Aufgabe 1 -->
    <div class="task-wrapper" id="task-1">
        <div class="task-title">Route 1: Zu Fuß (Haus → Park)</div>
        <div class="map-container">
            <svg viewBox="0 0 500 150">
                <defs><marker id="arrow1" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#3498db" /></marker></defs>
                <!-- Gebäude -->
                <rect x="10" y="60" width="40" height="40" class="building"/> <text x="30" y="85" class="building-label">Дом</text>
                <rect x="120" y="10" width="60" height="40" class="building"/> <text x="150" y="35" class="building-label">Почта</text>
                <rect x="250" y="100" width="60" height="40" class="building"/> <text x="280" y="125" class="building-label">Аптека</text>
                <circle cx="450" cy="60" r="30" class="building" style="stroke:#27ae60"/> <text x="450" y="65" class="building-label">Парк</text>
                <!-- Weg -->
                <path d="M 50 80 Q 80 80 120 30" class="path-route" marker-end="url(#arrow1)"/>
                <path d="M 180 30 Q 210 30 250 120" class="path-route" marker-end="url(#arrow1)"/>
                <path d="M 310 120 Q 380 120 415 60" class="path-route" marker-end="url(#arrow1)"/>
            </svg>
        </div>
        <div class="target-container sortable-area" id="target-1"></div>
        <div class="source-container sortable-area" id="source-1">
            <div class="word-card" id="t1-w1" onclick="moveCard(this)">Антон вышел из дома,</div>
            <div class="word-card" id="t1-w2" onclick="moveCard(this)">зашёл на почту,</div>
            <div class="word-card" id="t1-w3" onclick="moveCard(this)">потом зашёл в аптеку</div>
            <div class="word-card" id="t1-w4" onclick="moveCard(this)">и наконец дошёл до парка.</div>
        </div>
    </div>

    <!-- Aufgabe 2 -->
    <div class="task-wrapper" id="task-2">
        <div class="task-title">Route 2: Mit dem Auto (Arbeit → Haus)</div>
        <div class="map-container">
            <svg viewBox="0 0 500 150">
                <defs><marker id="arrow2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#3498db" /></marker></defs>
                <rect x="10" y="50" width="50" height="50" class="building"/> <text x="35" y="80" class="building-label">Работа</text>
                <rect x="150" y="20" width="60" height="40" class="building"/> <text x="180" y="45" class="building-label">АЗС</text>
                <rect x="300" y="20" width="60" height="40" class="building"/> <text x="330" y="45" class="building-label">Магазин</text>
                <rect x="440" y="50" width="40" height="40" class="building" style="stroke:#27ae60"/> <text x="460" y="75" class="building-label">Дом</text>
                
                <path d="M 60 75 L 150 40" class="path-route" marker-end="url(#arrow2)"/>
                <path d="M 210 40 L 300 40" class="path-route" marker-end="url(#arrow2)"/>
                <path d="M 360 40 L 435 70" class="path-route" marker-end="url(#arrow2)"/>
            </svg>
        </div>
        <div class="target-container sortable-area" id="target-2"></div>
        <div class="source-container sortable-area" id="source-2">
            <div class="word-card" id="t2-w1" onclick="moveCard(this)">Мы выехали с работы,</div>
            <div class="word-card" id="t2-w2" onclick="moveCard(this)">заехали на заправку,</div>
            <div class="word-card" id="t2-w3" onclick="moveCard(this)">потом заехали в магазин</div>
            <div class="word-card" id="t2-w4" onclick="moveCard(this)">и доехали до дома.</div>
        </div>
    </div>

    <!-- Aufgabe 3 -->
    <div class="task-wrapper" id="task-3">
        <div class="task-title">Route 3: Personen (Uni → Wohnheim)</div>
        <div class="map-container">
            <svg viewBox="0 0 500 150">
                <defs><marker id="arrow3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#3498db" /></marker></defs>
                <rect x="10" y="50" width="60" height="50" class="building"/> <text x="40" y="80" class="building-label">Универ</text>
                <rect x="150" y="100" width="60" height="40" class="building"/> <text x="180" y="125" class="building-label">Кафе</text>
                <circle cx="330" cy="50" r="25" class="building"/> <text x="330" y="55" class="building-label">Друг</text>
                <rect x="430" y="50" width="60" height="60" class="building" style="stroke:#27ae60"/> <text x="460" y="85" class="building-label">Общага</text>
                
                <path d="M 70 75 Q 100 75 150 120" class="path-route" marker-end="url(#arrow3)"/>
                <path d="M 210 120 Q 250 120 300 60" class="path-route" marker-end="url(#arrow3)"/>
                <path d="M 355 50 L 425 70" class="path-route" marker-end="url(#arrow3)"/>
            </svg>
        </div>
        <div class="target-container sortable-area" id="target-3"></div>
        <div class="source-container sortable-area" id="source-3">
            <div class="word-card" id="t3-w1" onclick="moveCard(this)">Студент вышел из университета,</div>
            <div class="word-card" id="t3-w2" onclick="moveCard(this)">зашёл в кафе,</div>
            <div class="word-card" id="t3-w3" onclick="moveCard(this)">потом зашёл к другу</div>
            <div class="word-card" id="t3-w4" onclick="moveCard(this)">и дошёл до общежития.</div>
        </div>
    </div>

    <!-- Aufgabe 4 -->
    <div class="task-wrapper" id="task-4">
        <div class="task-title">Route 4: Stadtbummel (Metro → Museum)</div>
        <div class="map-container">
            <svg viewBox="0 0 500 150">
                <defs><marker id="arrow4" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#3498db" /></marker></defs>
                <rect x="10" y="80" width="40" height="40" class="building" style="fill:#333; stroke:none"/> <text x="30" y="105" class="building-label" fill="white" style="fill:white">М</text>
                <rect x="120" y="20" width="50" height="40" class="building"/> <text x="145" y="45" class="building-label">Киоск</text>
                <rect x="250" y="20" width="60" height="40" class="building"/> <text x="280" y="45" class="building-label">Банк</text>
                <rect x="420" y="60" width="70" height="60" class="building" style="stroke:#27ae60"/> <text x="455" y="95" class="building-label">Музей</text>
                
                <path d="M 50 100 L 120 40" class="path-route" marker-end="url(#arrow4)"/>
                <path d="M 170 40 L 250 40" class="path-route" marker-end="url(#arrow4)"/>
                <path d="M 310 40 L 415 90" class="path-route" marker-end="url(#arrow4)"/>
            </svg>
        </div>
        <div class="target-container sortable-area" id="target-4"></div>
        <div class="source-container sortable-area" id="source-4">
            <div class="word-card" id="t4-w1" onclick="moveCard(this)">Турист пошёл от метро,</div>
            <div class="word-card" id="t4-w2" onclick="moveCard(this)">зашёл в киоск за водой,</div>
            <div class="word-card" id="t4-w3" onclick="moveCard(this)">зашёл в банк</div>
            <div class="word-card" id="t4-w4" onclick="moveCard(this)">и наконец дошёл до музея.</div>
        </div>
    </div>

    <div class="controls">
        <button class="btn-check" onclick="checkAll()">Überprüfen</button>
        <button class="btn-reset" onclick="resetAll()">Zurücksetzen</button>
        <button class="btn-solve" onclick="solveAll()">Lösung anzeigen</button>
    </div>

</div>

<script>
    // Definition der richtigen Reihenfolge für alle Aufgaben
    const correctOrders = {
        1: ['t1-w1', 't1-w2', 't1-w3', 't1-w4'],
        2: ['t2-w1', 't2-w2', 't2-w3', 't2-w4'],
        3: ['t3-w1', 't3-w2', 't3-w3', 't3-w4'],
        4: ['t4-w1', 't4-w2', 't4-w3', 't4-w4']
    };

    function moveCard(card) {
        // Finde den Wrapper dieser Karte (um zu wissen, zu welcher Aufgabe sie gehört)
        const wrapper = card.closest('.task-wrapper');
        const source = wrapper.querySelector('.source-container');
        const target = wrapper.querySelector('.target-container');

        // Reset Feedback
        target.classList.remove('correct', 'wrong');

        if (card.parentElement.classList.contains('source-container')) {
            target.appendChild(card);
        } else {
            source.appendChild(card);
        }
    }

    function checkAll() {
        for (let i = 1; i <= 4; i++) {
            const target = document.getElementById(`target-${i}`);
            const cards = Array.from(target.children);
            const correct = correctOrders[i];

            // Prüfen, ob Anzahl stimmt
            if (cards.length !== correct.length) {
                target.classList.add('wrong');
                target.classList.remove('correct');
                continue;
            }

            // Reihenfolge prüfen
            let isCorrect = true;
            for (let j = 0; j < cards.length; j++) {
                if (cards[j].id !== correct[j]) {
                    isCorrect = false;
                    break;
                }
            }

            if (isCorrect) {
                target.classList.add('correct');
                target.classList.remove('wrong');
            } else {
                target.classList.add('wrong');
                target.classList.remove('correct');
            }
        }
    }

    function resetAll() {
        for (let i = 1; i <= 4; i++) {
            const source = document.getElementById(`source-${i}`);
            const target = document.getElementById(`target-${i}`);
            
            // Zurückschieben
            correctOrders[i].forEach(id => {
                const card = document.getElementById(id);
                if (card) source.appendChild(card);
            });

            target.classList.remove('correct', 'wrong');
            shuffleContainer(source);
        }
    }

    function solveAll() {
        for (let i = 1; i <= 4; i++) {
            const target = document.getElementById(`target-${i}`);
            // In richtige Reihenfolge schieben
            correctOrders[i].forEach(id => {
                const card = document.getElementById(id);
                target.appendChild(card);
            });
            target.classList.add('correct');
            target.classList.remove('wrong');
        }
    }

    function shuffleContainer(container) {
        for (let k = container.children.length; k >= 0; k--) {
            container.appendChild(container.children[Math.random() * k | 0]);
        }
    }

    // Beim Laden mischen
    window.onload = function() {
        for (let i = 1; i <= 4; i++) {
            shuffleContainer(document.getElementById(`source-${i}`));
        }
    };
</script>

</body>
</html>